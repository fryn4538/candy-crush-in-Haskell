<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.STM</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-STM.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">stm-2.5.0.0: Software Transactional Memory</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) The University of Glasgow 2004</td></tr><tr><th>License</th><td>BSD-style (see the file libraries/base/LICENSE)</td></tr><tr><th>Maintainer</th><td>libraries@haskell.org</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable (requires STM)</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.STM</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#section.orphans">Orphan instances</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Software Transactional Memory: a modular composable concurrency
 abstraction.  See</p><ul><li><em>Composable memory transactions</em>, by Tim Harris, Simon Marlow, Simon
    Peyton Jones, and Maurice Herlihy, in
    <em>ACM Conference on Principles and Practice of Parallel Programming</em> 2005.
    <a href="https://www.microsoft.com/en-us/research/publication/composable-memory-transactions/">https://www.microsoft.com/en-us/research/publication/composable-memory-transactions/</a></li></ul><p>This module only defines the <code><a href="Control-Monad-STM.html#t:STM">STM</a></code> monad; you probably want to
 import <a href="Control-Concurrent-STM.html">Control.Concurrent.STM</a> (which exports <a href="Control-Monad-STM.html">Control.Monad.STM</a>).</p><p>Note that invariant checking (namely the <code>always</code> and <code>alwaysSucceeds</code>
 functions) has been removed. See ticket <a href="https://ghc.haskell.org/trac/ghc/ticket/14324">#14324</a> and
 the <a href="https://github.com/ghc-proposals/ghc-proposals/blob/master/proposals/0011-deprecate-stm-invariants.rst">removal proposal</a>.
 Existing users are encouraged to encapsulate their STM operations in safe
 abstractions which can perform the invariant checking without help from the
 runtime system.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:STM">STM</a> a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a></li><li class="src short"><a href="#v:atomically">atomically</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:retry">retry</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a</li><li class="src short"><a href="#v:orElse">orElse</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a</li><li class="src short"><a href="#v:check">check</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> ()</li><li class="src short"><a href="#v:throwSTM">throwSTM</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a</li><li class="src short"><a href="#v:catchSTM">catchSTM</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; (e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:STM" class="def">STM</a> a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:STM" class="selflink">#</a></p><div class="doc"><p>A monad supporting atomic memory transactions.</p></div><div class="subs instances"><p id="control.i:STM" class="caption collapser" onclick="toggleSection('i:STM')">Instances</p><div id="section.i:STM" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:STM:Monad:1" class="instance expander" onclick="toggleSection('i:id:STM:Monad:1')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> <a href="Control-Monad-STM.html#t:STM">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:STM:Monad:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; (a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:return" class="selflink">#</a></p><p class="src"><a href="#v:fail">fail</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:STM:Functor:2" class="instance expander" onclick="toggleSection('i:id:STM:Functor:2')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> <a href="Control-Monad-STM.html#t:STM">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:STM:Functor:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:STM:Applicative:3" class="instance expander" onclick="toggleSection('i:id:STM:Applicative:3')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Control-Monad-STM.html#t:STM">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:STM:Applicative:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> (a -&gt; b) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> b -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:STM:Alternative:4" class="instance expander" onclick="toggleSection('i:id:STM:Alternative:4')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Applicative.html#t:Alternative">Alternative</a> <a href="Control-Monad-STM.html#t:STM">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:STM:Alternative:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> [a] <a href="#v:many" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:STM:MonadPlus:5" class="instance expander" onclick="toggleSection('i:id:STM:MonadPlus:5')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> <a href="Control-Monad-STM.html#t:STM">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:STM:MonadPlus:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:mplus" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:STM:MArray:6" class="instance expander" onclick="toggleSection('i:id:STM:MArray:6')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/array-0.5.1.1/Data-Array-MArray.html#t:MArray">MArray</a> <a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> e <a href="Control-Monad-STM.html#t:STM">STM</a></span> <a href="#t:MArray" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:STM:MArray:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getBounds">getBounds</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; <a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> (i, i) <a href="#v:getBounds" class="selflink">#</a></p><p class="src"><a href="#v:getNumElements">getNumElements</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; <a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a></p><p class="src"><a href="#v:newArray">newArray</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; (i, i) -&gt; e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> (<a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e) <a href="#v:newArray" class="selflink">#</a></p><p class="src"><a href="#v:newArray_">newArray_</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; (i, i) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> (<a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e) <a href="#v:newArray_" class="selflink">#</a></p><p class="src"><a href="#v:unsafeNewArray_">unsafeNewArray_</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; (i, i) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> (<a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e)</p><p class="src"><a href="#v:unsafeRead">unsafeRead</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; <a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> e</p><p class="src"><a href="#v:unsafeWrite">unsafeWrite</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ix.html#t:Ix">Ix</a> i =&gt; <a href="Control-Concurrent-STM-TArray.html#t:TArray">TArray</a> i e -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> ()</p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:atomically" class="def">atomically</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/System-IO.html#t:IO">IO</a> a <a href="#v:atomically" class="selflink">#</a></p><div class="doc"><p>Perform a series of STM actions atomically.</p><p>You cannot use <code><a href="Control-Monad-STM.html#v:atomically">atomically</a></code> inside an <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/System-IO-Unsafe.html#v:unsafePerformIO">unsafePerformIO</a></code> or <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/System-IO-Unsafe.html#v:unsafeInterleaveIO">unsafeInterleaveIO</a></code>.
 Any attempt to do so will result in a runtime error.  (Reason: allowing
 this would effectively allow a transaction inside a transaction, depending
 on exactly when the thunk is evaluated.)</p><p>However, see <code><a href="Control-Concurrent-STM-TVar.html#v:newTVarIO">newTVarIO</a></code>, which can be called inside <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/System-IO-Unsafe.html#v:unsafePerformIO">unsafePerformIO</a></code>,
 and which allows top-level TVars to be allocated.</p></div></div><div class="top"><p class="src"><a id="v:retry" class="def">retry</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:retry" class="selflink">#</a></p><div class="doc"><p>Retry execution of the current memory transaction because it has seen
 values in TVars which mean that it should not continue (e.g. the TVars
 represent a shared buffer that is now empty).  The implementation may
 block the thread until one of the TVars that it has read from has been
 udpated. (GHC only)</p></div></div><div class="top"><p class="src"><a id="v:orElse" class="def">orElse</a> :: <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:orElse" class="selflink">#</a></p><div class="doc"><p>Compose two alternative STM actions (GHC only).  If the first action
 completes without retrying then it forms the result of the orElse.
 Otherwise, if the first action retries, then the second action is
 tried in its place.  If both actions retry then the orElse as a
 whole retries.</p></div></div><div class="top"><p class="src"><a id="v:check" class="def">check</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> () <a href="#v:check" class="selflink">#</a></p><div class="doc"><p>Check that the boolean condition is true and, if not, <code><a href="Control-Monad-STM.html#v:retry">retry</a></code>.</p><p>In other words, <code>check b = unless b retry</code>.</p><p><em>Since: 2.1.1</em></p></div></div><div class="top"><p class="src"><a id="v:throwSTM" class="def">throwSTM</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:throwSTM" class="selflink">#</a></p><div class="doc"><p>A variant of <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#v:throw">throw</a></code> that can only be used within the <code><a href="Control-Monad-STM.html#t:STM">STM</a></code> monad.</p><p>Throwing an exception in <code>STM</code> aborts the transaction and propagates the
 exception.</p><p>Although <code><a href="Control-Monad-STM.html#v:throwSTM">throwSTM</a></code> has a type that is an instance of the type of <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#v:throw">throw</a></code>, the
 two functions are subtly different:</p><pre>throw e    `seq` x  ===&gt; throw e
throwSTM e `seq` x  ===&gt; x</pre><p>The first example will cause the exception <code>e</code> to be raised,
 whereas the second one won't.  In fact, <code><a href="Control-Monad-STM.html#v:throwSTM">throwSTM</a></code> will only cause
 an exception to be raised when it is used within the <code><a href="Control-Monad-STM.html#t:STM">STM</a></code> monad.
 The <code><a href="Control-Monad-STM.html#v:throwSTM">throwSTM</a></code> variant should be used in preference to <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#v:throw">throw</a></code> to
 raise an exception within the <code><a href="Control-Monad-STM.html#t:STM">STM</a></code> monad because it guarantees
 ordering with respect to other <code><a href="Control-Monad-STM.html#t:STM">STM</a></code> operations, whereas <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#v:throw">throw</a></code>
 does not.</p></div></div><div class="top"><p class="src"><a id="v:catchSTM" class="def">catchSTM</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a -&gt; (e -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:catchSTM" class="selflink">#</a></p><div class="doc"><p>Exception handling within STM actions.</p></div></div><h1>Orphan instances</h1><div id="section.orphans" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:MonadFix:MonadFix:1" class="instance expander" onclick="toggleSection('i:o:ic:MonadFix:MonadFix:1')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Monad-Fix.html#t:MonadFix">MonadFix</a> <a href="Control-Monad-STM.html#t:STM">STM</a></span> <a href="#v:-36-fMonadFixSTM" class="selflink">#</a></td><td class="doc"><p><em>Since: 2.3</em></p></td></tr><tr><td colspan="2"><div id="section.i:o:ic:MonadFix:MonadFix:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mfix">mfix</a> :: (a -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a) -&gt; <a href="Control-Monad-STM.html#t:STM">STM</a> a <a href="#v:mfix" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>